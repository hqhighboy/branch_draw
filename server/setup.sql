-- 创建数据库
CREATE DATABASE IF NOT EXISTS db;
USE db;

-- 创建支部表
CREATE TABLE IF NOT EXISTS branches (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  secretary VARCHAR(50),
  deputy_secretary VARCHAR(50),
  organizational_commissioner VARCHAR(50),
  disciplinary_commissioner VARCHAR(50),
  propaganda_commissioner VARCHAR(50),
  learning_commissioner VARCHAR(50),
  member_count INT,
  average_age FLOAT,
  performance_2024 VARCHAR(10),
  secretary_project VARCHAR(200),
  honors TEXT
);

-- 创建年龄分布表
CREATE TABLE IF NOT EXISTS branch_age_distribution (
  id INT AUTO_INCREMENT PRIMARY KEY,
  branch_id INT NOT NULL,
  age_group VARCHAR(20) NOT NULL,
  percentage INT NOT NULL,
  FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
);

-- 创建学历分布表
CREATE TABLE IF NOT EXISTS branch_education_distribution (
  id INT AUTO_INCREMENT PRIMARY KEY,
  branch_id INT NOT NULL,
  education_level VARCHAR(20) NOT NULL,
  percentage INT NOT NULL,
  FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
);

-- 创建技能分布表
CREATE TABLE IF NOT EXISTS branch_skill_distribution (
  id INT AUTO_INCREMENT PRIMARY KEY,
  branch_id INT NOT NULL,
  skill_level VARCHAR(20) NOT NULL,
  percentage INT NOT NULL,
  FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
);

-- 创建职称分布表
CREATE TABLE IF NOT EXISTS branch_title_distribution (
  id INT AUTO_INCREMENT PRIMARY KEY,
  branch_id INT NOT NULL,
  title VARCHAR(20) NOT NULL,
  percentage INT NOT NULL,
  FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
);

-- 创建年度工作表
CREATE TABLE IF NOT EXISTS branch_annual_work (
  id INT AUTO_INCREMENT PRIMARY KEY,
  branch_id INT NOT NULL,
  task VARCHAR(200) NOT NULL,
  start_time VARCHAR(20),
  end_time VARCHAR(20),
  status VARCHAR(20),
  progress INT,
  FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
);

-- 插入示例数据
INSERT INTO branches (name, secretary, deputy_secretary, organizational_commissioner, disciplinary_commissioner, propaganda_commissioner, learning_commissioner, member_count, average_age, performance_2024, secretary_project, honors)
VALUES 
('党建人事部党支部', '张三1', '李四1', '王五1', '赵六1', '孙七1', '周八1', 20, 35, 'A', '支部书记项目1', '2023年先进基层党组织'),
('综合党支部', '张三2', '李四2', '王五2', '赵六2', '孙七2', '周八2', 21, 36, 'B+', '支部书记项目2', '2022年优秀党支部'),
('生产技术党支部', '张三3', '李四3', '王五3', '赵六3', '孙七3', '周八3', 22, 37, 'A-', '支部书记项目3', '2022年安全生产先进集体'),
('安监党支部', '张三4', '李四4', '王五4', '赵六4', '孙七4', '周八4', 23, 38, 'B', '支部书记项目4', '2021年技术创新示范单位'),
('数字运行党支部', '张三5', '李四5', '王五5', '赵六5', '孙七5', '周八5', 24, 39, 'A+', '支部书记项目5', '2021年党建工作示范点'),
('检修试验党支部', '张三6', '李四6', '王五6', '赵六6', '孙七6', '周八6', 25, 35, 'A', '支部书记项目6', '2023年先进基层党组织'),
('继保自动化党支部', '张三7', '李四7', '王五7', '赵六7', '孙七7', '周八7', 26, 36, 'B+', '支部书记项目7', '2022年优秀党支部'),
('500kV科北数字巡维中心党支部', '张三8', '李四8', '王五8', '赵六8', '孙七8', '周八8', 27, 37, 'A-', '支部书记项目8', '2022年安全生产先进集体'),
('500kV北郊数字巡维中心党支部', '张三9', '李四9', '王五9', '赵六9', '孙七9', '周八9', 28, 38, 'B', '支部书记项目9', '2021年技术创新示范单位'),
('220kV罗涌数字巡维中心党支部', '张三10', '李四10', '王五10', '赵六10', '孙七10', '周八10', 29, 39, 'A+', '支部书记项目10', '2021年党建工作示范点'),
('220kV田心数字巡维中心党支部', '张三11', '李四11', '王五11', '赵六11', '孙七11', '周八11', 30, 35, 'A', '支部书记项目11', '2023年先进基层党组织'),
('220kV田心数字运维中心党支部', '张三12', '李四12', '王五12', '赵六12', '孙七12', '周八12', 31, 36, 'B+', '支部书记项目12', '2022年优秀党支部');

-- 插入年龄分布数据
INSERT INTO branch_age_distribution (branch_id, age_group, percentage) VALUES
(1, '18-28岁', 30), (1, '28-35岁', 40), (1, '35-50岁', 25), (1, '50-60岁', 5),
(2, '18-28岁', 25), (2, '28-35岁', 35), (2, '35-50岁', 30), (2, '50-60岁', 10),
(3, '18-28岁', 20), (3, '28-35岁', 45), (3, '35-50岁', 25), (3, '50-60岁', 10),
(4, '18-28岁', 15), (4, '28-35岁', 30), (4, '35-50岁', 40), (4, '50-60岁', 15),
(5, '18-28岁', 35), (5, '28-35岁', 40), (5, '35-50岁', 20), (5, '50-60岁', 5),
(6, '18-28岁', 20), (6, '28-35岁', 35), (6, '35-50岁', 35), (6, '50-60岁', 10),
(7, '18-28岁', 25), (7, '28-35岁', 45), (7, '35-50岁', 25), (7, '50-60岁', 5),
(8, '18-28岁', 30), (8, '28-35岁', 35), (8, '35-50岁', 25), (8, '50-60岁', 10),
(9, '18-28岁', 25), (9, '28-35岁', 40), (9, '35-50岁', 30), (9, '50-60岁', 5),
(10, '18-28岁', 35), (10, '28-35岁', 35), (10, '35-50岁', 25), (10, '50-60岁', 5),
(11, '18-28岁', 30), (11, '28-35岁', 40), (11, '35-50岁', 25), (11, '50-60岁', 5),
(12, '18-28岁', 35), (12, '28-35岁', 40), (12, '35-50岁', 20), (12, '50-60岁', 5);

-- 插入学历分布数据
INSERT INTO branch_education_distribution (branch_id, education_level, percentage) VALUES
(1, '大专及以下', 10), (1, '本科', 55), (1, '硕士', 30), (1, '博士', 5),
(2, '大专及以下', 15), (2, '本科', 60), (2, '硕士', 20), (2, '博士', 5),
(3, '大专及以下', 5), (3, '本科', 50), (3, '硕士', 35), (3, '博士', 10),
(4, '大专及以下', 20), (4, '本科', 55), (4, '硕士', 20), (4, '博士', 5),
(5, '大专及以下', 5), (5, '本科', 45), (5, '硕士', 40), (5, '博士', 10),
(6, '大专及以下', 25), (6, '本科', 50), (6, '硕士', 20), (6, '博士', 5),
(7, '大专及以下', 10), (7, '本科', 50), (7, '硕士', 35), (7, '博士', 5),
(8, '大专及以下', 20), (8, '本科', 55), (8, '硕士', 20), (8, '博士', 5),
(9, '大专及以下', 15), (9, '本科', 55), (9, '硕士', 25), (9, '博士', 5),
(10, '大专及以下', 25), (10, '本科', 50), (10, '硕士', 20), (10, '博士', 5),
(11, '大专及以下', 20), (11, '本科', 55), (11, '硕士', 20), (11, '博士', 5),
(12, '大专及以下', 10), (12, '本科', 50), (12, '硕士', 35), (12, '博士', 5);

-- 插入技能分布数据
INSERT INTO branch_skill_distribution (branch_id, skill_level, percentage) VALUES
(1, '初中级工', 25), (1, '高级工', 40), (1, '技师', 25), (1, '高级技师', 10),
(2, '初中级工', 30), (2, '高级工', 35), (2, '技师', 25), (2, '高级技师', 10),
(3, '初中级工', 15), (3, '高级工', 35), (3, '技师', 35), (3, '高级技师', 15),
(4, '初中级工', 25), (4, '高级工', 45), (4, '技师', 20), (4, '高级技师', 10),
(5, '初中级工', 20), (5, '高级工', 30), (5, '技师', 35), (5, '高级技师', 15),
(6, '初中级工', 30), (6, '高级工', 40), (6, '技师', 20), (6, '高级技师', 10),
(7, '初中级工', 20), (7, '高级工', 35), (7, '技师', 35), (7, '高级技师', 10),
(8, '初中级工', 25), (8, '高级工', 40), (8, '技师', 25), (8, '高级技师', 10),
(9, '初中级工', 20), (9, '高级工', 40), (9, '技师', 30), (9, '高级技师', 10),
(10, '初中级工', 30), (10, '高级工', 35), (10, '技师', 25), (10, '高级技师', 10),
(11, '初中级工', 25), (11, '高级工', 40), (11, '技师', 25), (11, '高级技师', 10),
(12, '初中级工', 20), (12, '高级工', 35), (12, '技师', 35), (12, '高级技师', 10);

-- 插入职称分布数据
INSERT INTO branch_title_distribution (branch_id, title, percentage) VALUES
(1, '助理工程师', 20), (1, '工程师', 45), (1, '高级工程师', 30), (1, '正高级工程师', 5),
(2, '助理工程师', 25), (2, '工程师', 40), (2, '高级工程师', 25), (2, '正高级工程师', 10),
(3, '助理工程师', 15), (3, '工程师', 40), (3, '高级工程师', 35), (3, '正高级工程师', 10),
(4, '助理工程师', 20), (4, '工程师', 50), (4, '高级工程师', 25), (4, '正高级工程师', 5),
(5, '助理工程师', 15), (5, '工程师', 40), (5, '高级工程师', 35), (5, '正高级工程师', 10),
(6, '助理工程师', 25), (6, '工程师', 45), (6, '高级工程师', 25), (6, '正高级工程师', 5),
(7, '助理工程师', 15), (7, '工程师', 45), (7, '高级工程师', 30), (7, '正高级工程师', 10),
(8, '助理工程师', 20), (8, '工程师', 50), (8, '高级工程师', 25), (8, '正高级工程师', 5),
(9, '助理工程师', 15), (9, '工程师', 45), (9, '高级工程师', 30), (9, '正高级工程师', 10),
(10, '助理工程师', 25), (10, '工程师', 45), (10, '高级工程师', 25), (10, '正高级工程师', 5),
(11, '助理工程师', 20), (11, '工程师', 50), (11, '高级工程师', 25), (11, '正高级工程师', 5),
(12, '助理工程师', 15), (12, '工程师', 45), (12, '高级工程师', 30), (12, '正高级工程师', 10);

-- 插入年度工作数据
INSERT INTO branch_annual_work (branch_id, task, start_time, end_time, status, progress) VALUES
(1, '组织党员学习党的二十大精神', '2024-01', '2024-12', '进行中', 35),
(1, '开展"学习强国"学习竞赛活动', '2024-03', '2024-08', '进行中', 45),
(1, '组织党员参观红色教育基地', '2024-05', '2024-05', '准备中', 0),
(1, '举办青年职工技能大赛', '2024-06', '2024-07', '准备中', 0),
(1, '开展"党员先锋岗"评选活动', '2024-09', '2024-10', '未开始', 0),
(1, '党建品牌创建活动', '2024-04', '2024-11', '进行中', 25),
(1, '基层党组织标准化建设', '2024-03', '2024-12', '进行中', 30),
(1, '党员示范岗创建活动', '2024-05', '2024-09', '准备中', 0),
(1, '青年人才培养计划', '2024-06', '2024-12', '未开始', 0),
(1, '党建工作创新项目', '2024-07', '2024-12', '未开始', 0),

(2, '党员教育培训计划实施', '2024-01', '2024-12', '进行中', 40),
(2, '党建与业务深度融合项目', '2024-02', '2024-10', '进行中', 50),
(2, '党员责任区建设', '2024-04', '2024-09', '准备中', 0),
(2, '党建文化阵地建设', '2024-05', '2024-08', '准备中', 0),
(2, '党员先锋模范评选', '2024-09', '2024-11', '未开始', 0),
(2, '党建品牌提升工程', '2024-03', '2024-12', '进行中', 35),
(2, '党建信息化建设', '2024-02', '2024-10', '进行中', 45),
(2, '党员志愿服务活动', '2024-04', '2024-11', '准备中', 0),
(2, '青年人才培养工程', '2024-05', '2024-12', '未开始', 0),
(2, '党建工作创新项目', '2024-06', '2024-12', '未开始', 0),

(3, '技术创新能力提升工程', '2024-01', '2024-12', '进行中', 45),
(3, '党员技术攻关小组建设', '2024-02', '2024-09', '进行中', 55),
(3, '生产技术标准化建设', '2024-03', '2024-08', '进行中', 60),
(3, '青年技术人才培养计划', '2024-04', '2024-12', '准备中', 0),
(3, '技术创新成果展示活动', '2024-10', '2024-12', '未开始', 0),
(3, '党建与技术融合项目', '2024-03', '2024-11', '进行中', 40),
(3, '技术人才梯队建设', '2024-02', '2024-12', '进行中', 35),
(3, '技术创新平台建设', '2024-05', '2024-10', '准备中', 0),
(3, '技术交流与合作项目', '2024-06', '2024-12', '未开始', 0),
(3, '技术创新激励机制建设', '2024-07', '2024-12', '未开始', 0);

-- 为其他支部添加类似的年度工作数据
-- 支部4
INSERT INTO branch_annual_work (branch_id, task, start_time, end_time, status, progress) VALUES
(4, '安全生产责任制落实', '2024-01', '2024-12', '进行中', 50),
(4, '安全风险分级管控', '2024-02', '2024-10', '进行中', 45),
(4, '安全隐患排查治理', '2024-03', '2024-09', '进行中', 55),
(4, '安全教育培训计划', '2024-04', '2024-11', '准备中', 0),
(4, '安全文化建设活动', '2024-05', '2024-10', '准备中', 0),
(4, '安全应急演练', '2024-06', '2024-09', '未开始', 0),
(4, '安全管理信息化建设', '2024-02', '2024-11', '进行中', 40),
(4, '安全标准化建设', '2024-03', '2024-12', '进行中', 35),
(4, '安全监督检查机制完善', '2024-05', '2024-10', '准备中', 0),
(4, '安全管理创新项目', '2024-07', '2024-12', '未开始', 0);

-- 支部5
INSERT INTO branch_annual_work (branch_id, task, start_time, end_time, status, progress) VALUES
(5, '数字化转型项目推进', '2024-01', '2024-12', '进行中', 55),
(5, '智能运维系统建设', '2024-02', '2024-10', '进行中', 60),
(5, '数据治理能力提升', '2024-03', '2024-09', '进行中', 50),
(5, '数字化人才培养', '2024-04', '2024-12', '准备中', 0),
(5, '数字化创新成果展示', '2024-10', '2024-12', '未开始', 0),
(5, '数字化与党建融合项目', '2024-03', '2024-11', '进行中', 45),
(5, '数字化运营优化', '2024-02', '2024-10', '进行中', 50),
(5, '数字化平台建设', '2024-05', '2024-12', '准备中', 0),
(5, '数字化技术交流与合作', '2024-06', '2024-11', '未开始', 0),
(5, '数字化创新激励机制', '2024-07', '2024-12', '未开始', 0);

-- 支部6-12的年度工作数据可以类似添加
-- 为简化，这里只添加了前5个支部的详细数据
